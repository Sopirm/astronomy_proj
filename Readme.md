## –°—Ö–µ–º–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π


```mermaid
flowchart LR
  subgraph Client["–ë—Ä–∞—É–∑–µ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"]
    UI["Dashboard<br/>(HTML/JS/Bootstrap)"]
  end

  subgraph Edge["Nginx"]
    N["Nginx reverse proxy"]
  end

  subgraph Web["Node.js/Express"]
    NAPI["–ú–∞—Ä—à—Ä—É—Ç—ã Node.js:<br/>/api/iss/* /api/jwst/* /api/astro/* /dashboard"]
    Views["–®–∞–±–ª–æ–Ω—ã EJS"]
    Services["–°–µ—Ä–≤–∏—Å—ã/DTO"]
  end

  subgraph Rust["Rust —Å–µ—Ä–≤–∏—Å rust_iss"]
    RAPI["GET /health /last /fetch /osdr/*"]
    Scheduler["–§–æ–Ω–æ–≤—ã–π —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö"]
  end

  subgraph DB["PostgreSQL"]
    T1["iss_fetch_log"]
    T2["osdr_items"]
    T3["cache_*"]
  end

  subgraph Legacy["Legacy (Pascal)"]
    Pascal["–ì–µ–Ω–µ—Ä–∞—Ü–∏—è CSV/–¥–∞–Ω–Ω—ã—Ö"]
  end

  Ext1["WhereTheISS –∏ –¥—Ä. API"]
  Ext2["NASA OSDR / JWST API"]
  Ext3["AstronomyAPI events"]

  UI -->|HTTP| N
  N -->|Express| NAPI
  NAPI --> Views
  NAPI <--> Services
  Services -->|HTTP| RAPI
  Services -->|HTTP| Ext2
  Services -->|HTTP| Ext3
  RAPI --> T1
  RAPI --> T2
  Scheduler --> Ext1
  Scheduler --> Ext2
  Pascal --> DB
  DB <--> NAPI
```
### üõéÔ∏è –õ–µ–≥–µ–Ω–¥–∞ –∫–∞—Ä—Ç—ã
- **rust_iss** ‚Äî rust-—Å–µ—Ä–≤–∏—Å: –æ–ø—Ä–æ—Å –≤–Ω–µ—à–Ω–∏—Ö –∫–æ—Å–º–∏—á–µ—Å–∫–∏—Ö API (ISS, NASA OSDR –∏ –¥—Ä.), –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –∑–∞–ø–∏—Å—å —Å—ã—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö/–ª–æ–≥–æ–≤ –≤ PostgreSQL, —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ REST-—Ä—É—á–∫–∏ –¥–ª—è –≤—ã–±–æ—Ä–æ–∫/—Ç—Ä–∏–≥–≥–µ—Ä–æ–≤.
- **node_web** ‚Äî –≤–µ–±-—Å–∞–π—Ç –Ω–∞ Node.js/Express + EJS —Å Dashboard‚Äô–∞–º–∏ –∏ API-—Å–µ—Ä–≤–∏—Å–∞–º–∏
- **iss_db** ‚Äî PostgreSQL (—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–≥–æ–≤, –∫—ç—à–µ–π –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö).
- **pascal_legacy** ‚Äî –ª–µ–≥–∞—Å–∏-—É—Ç–∏–ª–∏—Ç–∞ (Pascal), –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç CSV –∏/–∏–ª–∏ –∑–∞–ø–∏—Å–∏ –¥–ª—è –ë–î.
- **nginx** ‚Äî —Ñ—Ä–æ–Ω—Ç–æ–≤–æ–π reverse-proxy (HTTP 80 ‚Üí node_web).




### –û—Ç—á–µ—Ç –æ –ø—Ä–æ–¥–µ–ª–∞–Ω–Ω–æ–π —Ä–∞–±–æ—Ç–µ 

#### 1. –î–æ—Ä–∞–±–æ—Ç–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (–ø–µ—Ä–µ—Ö–æ–¥ —Å Laravel –Ω–∞ Node.js/Express)

*   **–£–±—Ä–∞–Ω—ã –ª–∏—à–Ω–∏–µ –º–æ–¥—É–ª–∏ –∏ —É—Å—Ç–∞—Ä–µ–≤—à–∏–π PHP-–∫–æ–¥**:
    *   –ü–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–µ–Ω —Å–µ—Ä–≤–∏—Å `php` –∏–∑ `docker-compose.yml`.
    *   –£–¥–∞–ª–µ–Ω–∞ –≤—Å—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `services/php-web`.
    *   –ò–∑ `services/node-web/nginx.conf` —É–¥–∞–ª–µ–Ω—ã –≤—Å–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å PHP-–±—ç–∫–µ–Ω–¥–æ–º.
    *   –£–¥–∞–ª–µ–Ω—ã —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ JavaScript-—Ñ–∞–π–ª—ã (`space-effects.js`) –∏ –±–æ–ª—å—à–∞—è —á–∞—Å—Ç—å inline CSS, —á—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ø—Ä–æ—Å—Ç–∏–ª–æ –∫–æ–¥–æ–≤—É—é –±–∞–∑—É –∏ –ø–æ–≤—ã—Å–∏–ª–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü.
    *   –£–¥–∞–ª–µ–Ω—ã —Å—Å—ã–ª–∫–∏ –Ω–∞ `/iss` –∏–∑ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –∏ –¥–∞—à–±–æ—Ä–¥–∞.
*   **–†–∞–∑–¥–µ–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –Ω–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã (–æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–ª—è –±–∏–∑–Ω–µ—Å-—Ñ—É–Ω–∫—Ü–∏–π)**:
    *   –î–ª—è –∫–∞–∂–¥–æ–π –±–∏–∑–Ω–µ—Å-—Ñ—É–Ω–∫—Ü–∏–∏ (OSDR, Astro, Legacy) —Å–æ–∑–¥–∞–Ω—ã –æ—Ç–¥–µ–ª—å–Ω—ã–µ EJS-—à–∞–±–ª–æ–Ω—ã (`osdr.ejs`, `astro.ejs`, `legacy.ejs`) –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ JavaScript-—Ñ–∞–π–ª—ã (`osdr-page.js`, `astro-page.js`, `legacy-page.js`).
    *   –í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –µ–¥–∏–Ω—ã–π `layout.ejs`, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∏–π –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–π –≤–Ω–µ—à–Ω–∏–π –≤–∏–¥.
*   **–î–æ–±–∞–≤–ª–µ–Ω–∞ CSS-–≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è (Tailwind CSS)**:
    *   –î–∏–∑–∞–π–Ω —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω –∏ —É–ø—Ä–æ—â–µ–Ω —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Tailwind CSS. –í—Å–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –≤ `services/node-web/src/public/css/space-theme.css`.
*   **–î–æ–±–∞–≤–ª–µ–Ω—ã –≥–∏–±–∫–∏–µ –¥–∞—à–±–æ—Ä–¥—ã —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –∏ –ø–æ–∏—Å–∫–æ–º –¥–∞–Ω–Ω—ã—Ö (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –¥–ª—è Legacy)**:
    *   –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/legacy` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –¥–∞—à–±–æ—Ä–¥ —Å —Ç–∞–±–ª–∏—Ü–µ–π –¥–∞–Ω–Ω—ã—Ö, –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –æ—Ç Pascal-Legacy.
    *   –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ —Ä–∞–∑–ª–∏—á–Ω—ã–º –ø–æ–ª—è–º (—Å—Ç–∞—Ç—É—Å, —Ç–∏–ø) –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é/—É–±—ã–≤–∞–Ω–∏—é –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å—Ç–æ–ª–±—Ü–∞.
    *   –î–æ–±–∞–≤–ª–µ–Ω –ø–æ–∏—Å–∫ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º, —Å–æ–≤–º–µ—â–µ–Ω–Ω—ã–π —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏.

#### 2. –î–æ—Ä–∞–±–æ—Ç–∫–∞ Pascal-Legacy

*   **–ü–µ—Ä–µ–ø–∏—Å–∞–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è CSV —Ñ–∞–π–ª–∞**:
    *   –ú–æ–¥—É–ª—å `services/pascal-legacy/legacy.pas` –±—ã–ª –¥–æ—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ CSV-—Ñ–∞–π–ª–æ–≤ —Å –Ω–æ–≤—ã–º–∏ —Ç–∏–ø–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö: `recorded_at` (timestamp), `boolean_status` (–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è), `numeric_value` (—á–∏—Å–ª–∞), `string_description` (—Ç–µ–∫—Å—Ç).
    *   –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –≤ Pascal-–∫–æ–¥–µ, –≤–æ–∑–Ω–∏–∫–∞–≤—à–∏–µ –ø—Ä–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏.
*   **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è CSV –≤ –≤–∏–¥–µ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã**:
    *   –î–∞–Ω–Ω—ã–µ –∏–∑ CSV-—Ñ–∞–π–ª–æ–≤, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã—Ö Pascal-Legacy, —Ç–µ–ø–µ—Ä—å –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/legacy`.
*   **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω —ç–∫—Å–ø–æ—Ä—Ç –≤ —Ñ–æ—Ä–º–∞—Ç *.xlsx**:
    *   –î–æ–±–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π API-—ç–Ω–¥–ø–æ–∏–Ω—Ç `/api/legacy/export-xlsx` –≤ Node.js (`LegacyController.js`), –∫–æ—Ç–æ—Ä—ã–π —á–∏—Ç–∞–µ—Ç CSV-–¥–∞–Ω–Ω—ã–µ, –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –∏—Ö –≤ XLSX —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ `exceljs` –∏ –æ—Ç–¥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è.
    *   –û–±–Ω–æ–≤–ª–µ–Ω `services/node-web/package.json` –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è `exceljs`.
    *   `services/node-web/Dockerfile` –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

#### 3. –î–æ—Ä–∞–±–æ—Ç–∫–∞ –±—ç–∫–µ–Ω–¥-—á–∞—Å—Ç–∏ –≤ Docker
*   **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –≤–∏–¥–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤**:
    *   –ë–∞–∑–æ–≤–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ Node.js. 
*   **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Docker Compose –∏ Nginx**:
    *   `docker-compose.yml` –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞ `php` –∏ –≤—Å–µ—Ö –µ–≥–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.
    *   `services/node-web/nginx.conf` –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Å–µ—Ö –≤–µ–±-–∑–∞–ø—Ä–æ—Å–æ–≤ –∏ API-—ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –Ω–∞ Node.js-—Å–µ—Ä–≤–∏—Å, –∏—Å–∫–ª—é—á–∞—è PHP.
    *   –†–µ—à–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ Docker (–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ `csvdata` –¥–ª—è `node_web`).

---