<% layout('layout') %>
<!-- Legacy Pascal CSV Data Page -->
<div>
  <!-- Header -->
  <div class="text-center mb-8">
    <h1 class="text-4xl font-bold text-gray-900">
      üìä Legacy Pascal - CSV –¥–∞–Ω–Ω—ã–µ
    </h1>
    
  </div>

  <!-- Filter and Export Controls -->
  <div class="space-card rounded-lg p-6 mb-6">
    <div class="flex items-center justify-between flex-wrap gap-4">
      <div class="flex items-center space-x-4">
        <h3 class="text-lg font-semibold text-gray-900">üìà –î–∞–Ω–Ω—ã–µ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏</h3>
        <input type="text" id="search-input" placeholder="üîç –ü–æ–∏—Å–∫..." 
               class="bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm w-48 focus:border-blue-500 focus:outline-none text-gray-900">
      </div>
      <div class="flex items-center space-x-3">
        <span class="text-sm text-gray-600">
          –ü–æ–∫–∞–∑–∞–Ω–æ: <span id="filtered-count" class="text-blue-600 font-semibold">0</span> –∏–∑ 
          <span id="total-count" class="text-gray-900 font-semibold">0</span> –∑–∞–ø–∏—Å–µ–π
        </span>
        <button id="export-xlsx-btn" 
                class="px-4 py-2 bg-green-100 hover:bg-green-200 border border-green-300 rounded-lg text-green-700 text-sm">
          üì• –≠–∫—Å–ø–æ—Ä—Ç –≤ XLSX
        </button>
        <button id="reset-filters-btn" 
                class="px-3 py-1 bg-gray-100 hover:bg-gray-200 border border-gray-300 rounded text-gray-700 text-sm">
          üîÑ –°–±—Ä–æ—Å
        </button>
      </div>
    </div>
  </div>

  <!-- Data Table -->
  <div id="data-table-section" class="space-card rounded-lg p-6" style="display: none;">
    <div class="overflow-x-auto">
      <table class="w-full text-sm">
        <thead>
          <tr class="border-b border-gray-200">
            <th class="text-left py-3 px-3 text-gray-700 cursor-pointer hover:text-gray-900" data-sort="recorded_at">–í—Ä–µ–º—è <span class="sort-indicator">‚ÜïÔ∏è</span></th>
            <th class="text-left py-3 px-3 text-gray-700 cursor-pointer hover:text-gray-900" data-sort="voltage">–ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ <span class="sort-indicator">‚ÜïÔ∏è</span></th>
            <th class="text-left py-3 px-3 text-gray-700 cursor-pointer hover:text-gray-900" data-sort="temp">–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ <span class="sort-indicator">‚ÜïÔ∏è</span></th>
            <th class="text-left py-3 px-3 text-gray-700 cursor-pointer hover:text-gray-900" data-sort="boolean_status">–°—Ç–∞—Ç—É—Å<span class="sort-indicator">‚ÜïÔ∏è</span></th>
            <th class="text-left py-3 px-3 text-gray-700 cursor-pointer hover:text-gray-900" data-sort="numeric_value">–ß–∏—Å–ª–æ <span class="sort-indicator">‚ÜïÔ∏è</span></th>
            <th class="text-left py-3 px-3 text-gray-700 cursor-pointer hover:text-gray-900" data-sort="string_description">–û–ø–∏—Å–∞–Ω–∏–µ<span class="sort-indicator">‚ÜïÔ∏è</span></th>
            <th class="text-left py-3 px-3 text-gray-700">–§–∞–π–ª –∏—Å—Ç–æ—á–Ω–∏–∫–∞</th>
          </tr>
        </thead>
        <tbody id="legacy-table-body">
          <!-- Data will be loaded here by JavaScript -->
        </tbody>
      </table>
    </div>
  </div>

  <!-- Empty State -->
  <div id="empty-state" class="text-center py-12 space-card rounded-lg" style="display: none;">
    <div class="text-6xl mb-4 text-gray-500">üìä</div>
    <h3 class="text-xl font-semibold text-gray-900 mb-2">–î–∞–Ω–Ω—ã–µ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
    <p class="text-gray-600">–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –ª–∏ CSV-—Ñ–∞–π–ª—ã –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞</p>
    <button class="mt-4 px-4 py-2 bg-blue-100 hover:bg-blue-200 border border-blue-300 rounded text-blue-700"
            onclick="window.location.reload()">
      üîÑ –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É
    </button>
  </div>
</div>

<script src="/js/legacy-page.js" defer></script>
