<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= title || '–ö–æ—Å–º–∏—á–µ—Å–∫–∏–π –î–∞—à–±–æ—Ä–¥ | –ö–∞—Å—Å–∏–æ–ø–µ—è' %></title>
  
  <!-- CSS Libraries -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet">
  
  <!-- Custom CSS -->
  <style>
    /* –ö–æ—Å–º–∏—á–µ—Å–∫–∞—è —Ç–µ–º–∞—Ç–∏–∫–∞ */
    :root {
      --space-primary: #0f172a;
      --space-secondary: #1e293b;
      --space-accent: #3b82f6;
      --space-text: #e2e8f0;
    }
    
    body { 
      background: linear-gradient(135deg, var(--space-primary) 0%, var(--space-secondary) 100%);
      color: var(--space-text);
      min-height: 100vh;
    }
    
    .space-card {
      background: rgba(30, 41, 59, 0.8);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(59, 130, 246, 0.2);
      transition: all 0.3s ease;
    }
    
    .space-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(59, 130, 246, 0.2);
    }
    
    .loading {
      animation: pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }
    
    #map { 
      height: 340px; 
      border-radius: 8px;
    }
  </style>
</head>
<body>
  <!-- Navigation -->
  <nav class="bg-slate-800 bg-opacity-90 backdrop-filter backdrop-blur-lg border-b border-blue-500 border-opacity-30">
    <div class="container mx-auto px-4">
      <div class="flex items-center justify-between h-16">
        <div class="flex items-center space-x-8">
          <a href="/dashboard" class="text-xl font-bold text-blue-400 hover:text-blue-300 transition-colors">
            üöÄ –ö–∞—Å—Å–∏–æ–ø–µ—è
          </a>
          
          <div class="hidden md:flex space-x-6">
            <a href="/dashboard" class="nav-link <%= (currentPath === '/dashboard') ? 'active' : '' %>">
              üìä –î–∞—à–±–æ—Ä–¥
            </a>
            <a href="/iss" class="nav-link <%= (currentPath === '/iss') ? 'active' : '' %>">
              üõ∏ –ú–ö–°
            </a>
            <a href="/jwst" class="nav-link <%= (currentPath === '/jwst') ? 'active' : '' %>">
              üî≠ JWST
            </a>
            <a href="/osdr" class="nav-link <%= (currentPath === '/osdr') ? 'active' : '' %>">
              üß™ OSDR
            </a>
            <a href="/legacy" class="nav-link <%= (currentPath === '/legacy') ? 'active' : '' %>">
              üìà Legacy
            </a>
          </div>
        </div>
        
        <!-- Health Status -->
        <div class="flex items-center space-x-2">
          <div id="health-status" class="w-3 h-3 bg-green-400 rounded-full animate-pulse"></div>
          <span class="text-sm text-gray-300">Online</span>
        </div>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="container mx-auto px-4 py-6">
    <%- body %>
  </main>

  <!-- Scripts -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  
  <script>
    // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã
    window.SpaceApp = {
      // Health check
      async checkHealth() {
        try {
          const response = await axios.get('/health');
          const status = document.getElementById('health-status');
          status.className = 'w-3 h-3 bg-green-400 rounded-full animate-pulse';
        } catch (error) {
          const status = document.getElementById('health-status');
          status.className = 'w-3 h-3 bg-red-400 rounded-full';
        }
      },
      
      // –ü–æ–∫–∞–∑–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É
      showLoading(elementId) {
        const element = document.getElementById(elementId);
        if (element) {
          element.innerHTML = '<div class="loading text-center py-8">‚ö° –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</div>';
        }
      }
    };
    
    // –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
    setInterval(() => {
      SpaceApp.checkHealth();
    }, 30000);
  </script>

  <style>
    .nav-link {
      @apply text-gray-300 hover:text-blue-400 px-3 py-2 rounded-md text-sm font-medium transition-colors;
    }
    
    .nav-link.active {
      @apply text-blue-400 bg-blue-500 bg-opacity-20;
    }
  </style>
</body>
</html>
